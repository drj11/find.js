#!/usr/bin/env coffee

fs = require 'fs'
async = require 'async'

one = (name, cb) ->
  console.log name
  fs.stat name, (err, st) ->
    if err
      throw err
    if st.isDirectory()
      mapdir name, cb
    else
      cb()

mapdir = (dir, done) ->
  fs.readdir dir, (err, names) ->
    if err
      throw err
    async.each names, (name, cb) ->
      one "#{dir}/#{name}", cb
    , done

one process.argv[2], process.exit
